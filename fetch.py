import requests
import json

locations = [
    "02t",
    "03t",
    "05t",
    "11t",
    "12t",
    "50t",
    "52t",
    "53t",
    "54t",
    "59t",
    "61t",
    "bkp100t",
    "bkp101t",
    "bkp102t",
    "bkp103t",
    "bkp104t",
    "bkp105t",
    "bkp110t",
    "bkp112t",
    "bkp114t",
    "bkp116t",
    "bkp117t",
    "bkp118t",
    "bkp119t",
    "bkp120t",
    "bkp121t",
    "bkp122t",
    "bkp123t",
    "bkp124t",
    "bkp125t",
    "bkp126t",
    "bkp127t",
    "bkp128t",
    "bkp129t",
    "bkp130t",
    "bkp131t",
    "bkp133t",
    "bkp56t",
    "bkp57t",
    "bkp58t",
    "bkp59t",
    "bkp60t",
    "bkp61t",
    "bkp62t",
    "bkp63t",
    "bkp64t",
    "bkp65t",
    "bkp66t",
    "bkp67t",
    "bkp69t",
    "bkp70t",
    "bkp71t",
    "bkp72t",
    "bkp73t",
    "bkp74t",
    "bkp75t",
    "bkp76t",
    "bkp77t",
    "bkp78t",
    "bkp79t",
    "bkp80t",
    "bkp81t",
    "bkp82t",
    "bkp83t",
    "bkp84t",
    "bkp85t",
    "bkp86t",
    "bkp87t",
    "bkp88t",
    "bkp89t",
    "bkp90t",
    "bkp91t",
    "bkp92t",
    "bkp93t",
    "bkp94t",
    "bkp95t",
    "bkp96t",
    "bkp97t",
    "bkp98t",
    "bkp99t",
    "o10",
    "81t",
    "13t",
    "22t",
    "20t",
    "08t",
    "16t",
    "17t",
    "18t",
    "19t",
    "14t",
    "27t",
]

for location in locations:
    print(location)
    data = requests.get(url=f'http://air4thai.com/forweb/getHistoryData.php?stationID={location}&param=PM25&type=hr&sdate=2023-10-01&edate=2024-07-24&stime=00&etime=23')
    output = data.json()
    # print(len(output))
    stations = output['stations']
    assert len(stations) == 1, len(stations)
    print(len(stations[0]['data']))
    with open(f'{location}.json', 'w') as f:
        json.dump(stations[0], f)